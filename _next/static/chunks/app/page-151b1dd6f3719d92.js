(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5938:function(e,t,a){Promise.resolve().then(a.bind(a,8422))},8422:function(e,t,a){"use strict";let o;a.d(t,{default:function(){return p}});var r=a(7437),n=a(2265);function s(){let[e,t]=(0,n.useState)(!0);return(0,r.jsx)(r.Fragment,{children:e&&(0,r.jsx)("div",{className:"fixed z-10 p-4 inset-0 overflow-y-auto pointer-events-none text-white",children:(0,r.jsxs)("div",{className:"flex justify-start min-h-screen pt-4 px-4 pb-20 sm:block sm:p-0",children:[(0,r.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),(0,r.jsxs)("div",{className:"bg-slate-500/95 inline-block align-bottom rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full pointer-events-auto",children:[(0,r.jsx)("div",{className:"bg-opacity-75 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,r.jsx)("div",{className:"sm:flex sm:items-start",children:(0,r.jsxs)("div",{className:"mt-3 text-left sm:mt-0 sm:ml-4 sm:text-left",children:[(0,r.jsx)("h3",{className:"text-2xl py-2 leading-6 font-medium ",id:"modal-title",children:"Instructions"}),(0,r.jsxs)("ul",{className:"list-decimal px-5",children:[(0,r.jsx)("li",{children:'Use the "Create Nodes" option to create nodes at intersections.'}),(0,r.jsx)("li",{children:'Use the "Create Edges" option to represent streets by connecting nodes.'}),(0,r.jsx)("li",{children:'With the "Shortest Path" option selected, you can see the shortest route between the nodes you select.'}),(0,r.jsx)("li",{children:'With the "Delete Method" option selected, you can delete nodes and edges.'}),(0,r.jsx)("li",{children:"You can also upload any map you like to use your own GPS."})]})]})})}),(0,r.jsx)("div",{className:"px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:(0,r.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-sky-500/30 text-xs font-medium text-white hover:bg-slate-800 focus:outline-none sm:ml-3 sm:w-auto sm:text-xs",onClick:()=>t(!1),children:"Close"})})]})]})})})}var l=a(2196),i=a(4926),d=a.n(i),c={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let u=new Uint8Array(16),h=[];for(let e=0;e<256;++e)h.push((e+256).toString(16).slice(1));var m=function(e,t,a){if(c.randomUUID&&!t&&!e)return c.randomUUID();let r=(e=e||{}).random||(e.rng||function(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(u)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){a=a||0;for(let e=0;e<16;++e)t[a+e]=r[e];return t}return function(e,t=0){return h[e[t+0]]+h[e[t+1]]+h[e[t+2]]+h[e[t+3]]+"-"+h[e[t+4]]+h[e[t+5]]+"-"+h[e[t+6]]+h[e[t+7]]+"-"+h[e[t+8]]+h[e[t+9]]+"-"+h[e[t+10]]+h[e[t+11]]+h[e[t+12]]+h[e[t+13]]+h[e[t+14]]+h[e[t+15]]}(r)};d()(l.Z);var p=()=>{let e;let t=(0,n.useRef)(null),a=()=>{null!=e&&(console.log("saving layout..."),window.localStorage.setItem("savedlayout",JSON.stringify(e.json())))},o=async()=>{if(window.confirm("Are you sure you want to restore the default data? This will overwrite your current data."))try{let t=await fetch("/example.json"),a=await t.json();window.localStorage.setItem("savedlayout",JSON.stringify(a)),e&&e.json(a)}catch(e){console.error("Error fetching default data:",e)}};return(0,n.useEffect)(()=>{if(!t.current)return;let o=new Image,r=window.localStorage.getItem("savedCanvasImage");r?o.src=r:o.src="./pmap.png",o.onload=()=>{var a;let r=(e=(0,l.Z)({container:t.current,style:[{selector:"node",style:{"background-color":"#0074D9",width:"10px",height:"10px",label:"",color:"#fff","text-valign":"center","text-halign":"center","z-index":1}},{selector:"edge",style:{width:2,"line-color":"#0074D9","target-arrow-color":"#0074D9","target-arrow-shape":"triangle",label:"",color:"#fff","text-rotation":"autorotate","font-size":12,"text-valign":"center","text-halign":"center","z-index":2}},{selector:".highlighted",style:{"background-color":"#FF4136","line-color":"#FF4136","target-arrow-color":"#FF4136","transition-property":"background-color, line-color, target-arrow-color","transition-duration":.5}}],elements:[]})).cyCanvas({zIndex:-1}),n=r.getCanvas().getContext("2d");e.on("render cyCanvas.resize",()=>{r.resetTransform(n),r.clear(n),r.setTransform(n),n.save(),n.drawImage(o,0,0),n.restore()}),null===(a=document.getElementById("bgImageUpload"))||void 0===a||a.addEventListener("change",t=>{var a;window.localStorage.removeItem("savedlayout");let r=null===(a=t.target.files)||void 0===a?void 0:a[0],n=new FileReader;n.onload=t=>{var a;let r=null===(a=t.target)||void 0===a?void 0:a.result,n=new Image;n.onload=()=>{o.src=r,e.trigger("render"),window.localStorage.setItem("savedCanvasImage",r)},n.src=r},r&&n.readAsDataURL(r)});let s="node";document.querySelectorAll('input[name="mode"]').forEach(e=>{e.addEventListener("change",e=>{s=e.target.value})});let i=[];e.on("tap",t=>{switch(s){case"edge":if(t.target===e)return;let a=t.target,o=e.$(":selected");if(0===o.length)break;if(a.id()===o.id()){alert("Cannot create an edge to the same node.");break}if(e.edges().filter(e=>e.data("source")===a.id()&&e.data("target")===o.id()||e.data("source")===o.id()&&e.data("target")===a.id()).length>0)break;let r=c(a,o);e.add({group:"edges",data:{id:m(),source:a.id(),target:o.id(),label:r},classes:"autorotate"});break;case"node":if(t.target===e){let a=t.position;e.add({group:"nodes",data:{id:m()},position:{x:a.x,y:a.y}})}break;case"shortestPath":if(t.target===e)return;if(i.push(t.target.id()),3===i.length&&i.shift(),2===i.length){let t=e.elements().aStar({root:e.getElementById(i[0]),goal:e.getElementById(i[1]),weight:e=>parseFloat(e.data("label"))||1});t.found?(e.elements().removeClass("highlighted"),t.path.forEach(e=>{e.addClass("highlighted")})):e.elements().removeClass("highlighted")}break;case"delete":if(t.target===e)return;t.target.remove()}}),e.on("dragfree","node",t=>{t.target.connectedEdges().forEach(t=>{let a=c(e.getElementById(t.data("source")),e.getElementById(t.data("target")));t.data("label",a)})});let d=window.localStorage.getItem("savedlayout");function c(e,t){let a=e.position(),o=t.position();return Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)).toFixed(2)}null!=d&&e.json(JSON.parse(d))};let n=setInterval(a,3e4);return()=>clearInterval(n)},[]),(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsxs)("div",{id:"controls",className:"flex flex-wrap justify-between p-2 gap-2 controls bg-slate-500 rounded-xl shadow-md text-white",children:[(0,r.jsx)("input",{type:"radio",id:"nodeMode",name:"mode",value:"node",className:"hidden peer/node",defaultChecked:!0}),(0,r.jsx)("label",{htmlFor:"nodeMode",className:"cursor-pointer bg-sky-500/30 peer-checked/node:bg-slate-800 rounded-xl p-2",children:"Create Nodes"}),(0,r.jsx)("input",{type:"radio",id:"edgeMode",name:"mode",value:"edge",className:"hidden peer/edge"}),(0,r.jsx)("label",{htmlFor:"edgeMode",className:"cursor-pointer bg-sky-500/30 peer-checked/edge:bg-slate-800 rounded-xl p-2",children:"Create Edges"}),(0,r.jsx)("input",{type:"radio",id:"shortestPathMode",name:"mode",value:"shortestPath",className:"hidden peer/shortestPath"}),(0,r.jsx)("label",{htmlFor:"shortestPathMode",className:"cursor-pointer bg-sky-500/30 peer-checked/shortestPath:bg-slate-800 rounded-xl p-2",children:"Find Shortest Path"}),(0,r.jsx)("input",{type:"radio",id:"deleteMode",name:"mode",value:"delete",className:"hidden peer/delete"}),(0,r.jsx)("label",{htmlFor:"deleteMode",className:"cursor-pointer bg-sky-500/30 peer-checked/delete:bg-slate-800 rounded-xl p-2",children:"Delete Mode"}),(0,r.jsxs)("div",{className:"pt-2",children:[(0,r.jsx)("label",{htmlFor:"bgImageUpload",className:"cursor-pointer underline text-white p-2 rounded-xl",children:"Upload my own map"}),(0,r.jsx)("input",{type:"file",id:"bgImageUpload",accept:"image/*",className:"hidden"})]}),(0,r.jsx)("div",{style:{position:"fixed",bottom:"20px",right:"20px"},children:(0,r.jsx)("button",{onClick:o,className:"cursor-pointer text-white p-2 rounded-xl bg-sky-500/30",children:"\uD83D\uDD03"})})]}),(0,r.jsx)(s,{}),(0,r.jsx)("div",{id:"cy",ref:t,style:{position:"fixed",top:"0",right:"0",bottom:"0",left:"0",zIndex:"1"},className:"bg-slate-800"})]})}},4926:function(e,t,a){"use strict";var o,r;r=function(e){e&&e("core","cyCanvas",function(e){var t=this,a=t.container(),o=document.createElement("canvas");a.appendChild(o);var r=Object.assign({},{zIndex:1,pixelRatio:"auto"},e);function n(){var e=a.offsetWidth,n=a.offsetHeight,s=e*r.pixelRatio,l=n*r.pixelRatio;o.width=s,o.height=l,o.style.width=e+"px",o.style.height=n+"px",t.trigger("cyCanvas.resize")}return"auto"===r.pixelRatio&&(r.pixelRatio=window.devicePixelRatio||1),t.on("resize",function(){n()}),o.setAttribute("style","position:absolute; top:0; left:0; z-index:"+r.zIndex+";"),n(),{getCanvas:function(){return o},clear:function(e){var a=t.width(),o=t.height();e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,a*r.pixelRatio,o*r.pixelRatio),e.restore()},resetTransform:function(e){e.setTransform(1,0,0,1,0,0)},setTransform:function(e){var a=t.pan(),o=t.zoom();e.setTransform(1,0,0,1,0,0),e.translate(a.x*r.pixelRatio,a.y*r.pixelRatio),e.scale(o*r.pixelRatio,o*r.pixelRatio)}}})},e.exports&&(e.exports=function(e){r(e)}),void 0!==(o=(function(){return r}).call(t,a,t,e))&&(e.exports=o),"undefined"!=typeof cytoscape&&r(cytoscape)}},function(e){e.O(0,[264,971,23,744],function(){return e(e.s=5938)}),_N_E=e.O()}]);