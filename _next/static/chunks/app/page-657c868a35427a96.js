(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5938:function(e,t,a){Promise.resolve().then(a.bind(a,8422))},8422:function(e,t,a){"use strict";let r;a.d(t,{default:function(){return p}});var o=a(7437),n=a(2265);function s(){let[e,t]=(0,n.useState)(!0);return(0,o.jsx)(o.Fragment,{children:e&&(0,o.jsx)("div",{className:"fixed z-10 p-4 inset-0 overflow-y-auto pointer-events-none text-white",children:(0,o.jsxs)("div",{className:"flex justify-start min-h-screen pt-4 px-4 pb-20 sm:block sm:p-0",children:[(0,o.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),(0,o.jsxs)("div",{className:"bg-slate-500/95 inline-block align-bottom rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full pointer-events-auto",children:[(0,o.jsx)("div",{className:"bg-opacity-75 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,o.jsx)("div",{className:"sm:flex sm:items-start",children:(0,o.jsxs)("div",{className:"mt-3 text-left sm:mt-0 sm:ml-4 sm:text-left",children:[(0,o.jsx)("h3",{className:"text-2xl py-2 leading-6 font-medium ",id:"modal-title",children:"Instructions"}),(0,o.jsxs)("ul",{className:"list-decimal px-5",children:[(0,o.jsx)("li",{children:'Use the "Create Nodes" option to create nodes at intersections.'}),(0,o.jsx)("li",{children:'Use the "Create Edges" option to represent streets by connecting nodes.'}),(0,o.jsx)("li",{children:'With the "Shortest Path" option selected, you can see the shortest route between the nodes you select.'}),(0,o.jsx)("li",{children:'With the "Delete Method" option selected, you can delete nodes and edges.'}),(0,o.jsx)("li",{children:"You can also upload any map you like to use your own GPS."})]})]})})}),(0,o.jsx)("div",{className:"px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:(0,o.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-sky-500/30 text-xs font-medium text-white hover:bg-slate-800 focus:outline-none sm:ml-3 sm:w-auto sm:text-xs",onClick:()=>t(!1),children:"Close"})})]})]})})})}var l=a(2196),i=a(4926),d=a.n(i),c={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let u=new Uint8Array(16),m=[];for(let e=0;e<256;++e)m.push((e+256).toString(16).slice(1));var h=function(e,t,a){if(c.randomUUID&&!t&&!e)return c.randomUUID();let o=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(u)})();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){a=a||0;for(let e=0;e<16;++e)t[a+e]=o[e];return t}return function(e,t=0){return m[e[t+0]]+m[e[t+1]]+m[e[t+2]]+m[e[t+3]]+"-"+m[e[t+4]]+m[e[t+5]]+"-"+m[e[t+6]]+m[e[t+7]]+"-"+m[e[t+8]]+m[e[t+9]]+"-"+m[e[t+10]]+m[e[t+11]]+m[e[t+12]]+m[e[t+13]]+m[e[t+14]]+m[e[t+15]]}(o)};d()(l.Z);var p=()=>{let e;let t=(0,n.useRef)(null),a=()=>{null!=e&&(console.log("saving layout..."),window.localStorage.setItem("savedlayout",JSON.stringify(e.json())))},r=async()=>{if(window.confirm("Are you sure you want to restore the default data? This will overwrite your current data."))try{let t=await fetch("/example.json"),a=await t.json();window.localStorage.setItem("savedlayout",JSON.stringify(a)),e&&e.json(a)}catch(e){console.error("Error fetching default data:",e)}};return(0,n.useEffect)(()=>{if(!t.current)return;let r=new Image,o=window.localStorage.getItem("savedCanvasImage");o?r.src=o:r.src="./pmap.png",r.onload=()=>{var a;let o=(e=(0,l.Z)({container:t.current,style:[{selector:"node",style:{"background-color":"#0074D9",width:"10px",height:"10px",label:"",color:"#fff","text-valign":"center","text-halign":"center","z-index":1}},{selector:"edge",style:{width:2,"line-color":"#0074D9","target-arrow-color":"#0074D9","target-arrow-shape":"triangle",label:"",color:"#fff","text-rotation":"autorotate","font-size":12,"text-valign":"center","text-halign":"center","z-index":2}},{selector:".highlighted",style:{"background-color":"#FF4136","line-color":"#FF4136","target-arrow-color":"#FF4136","transition-property":"background-color, line-color, target-arrow-color","transition-duration":.5}}],elements:[]})).cyCanvas({zIndex:-1}),n=o.getCanvas().getContext("2d");e.on("render cyCanvas.resize",()=>{o.resetTransform(n),o.clear(n),o.setTransform(n),n.save(),n.drawImage(r,0,0),n.restore()}),null===(a=document.getElementById("bgImageUpload"))||void 0===a||a.addEventListener("change",t=>{var a;window.localStorage.removeItem("savedlayout");let o=null===(a=t.target.files)||void 0===a?void 0:a[0],n=new FileReader;n.onload=t=>{var a;let o=null===(a=t.target)||void 0===a?void 0:a.result,n=new Image;n.onload=()=>{r.src=o,e.trigger("render"),window.localStorage.setItem("savedCanvasImage",o)},n.src=o},o&&n.readAsDataURL(o)});let s="node";document.querySelectorAll('input[name="mode"]').forEach(e=>{e.addEventListener("change",e=>{s=e.target.value})});let i=[];e.on("tap",t=>{switch(s){case"edge":if(t.target===e)return;let a=t.target,r=e.$(":selected");if(0===r.length)break;if(a.id()===r.id()){alert("Cannot create an edge to the same node.");break}if(e.edges().filter(e=>e.data("source")===a.id()&&e.data("target")===r.id()||e.data("source")===r.id()&&e.data("target")===a.id()).length>0)break;let o=c(a,r);e.add({group:"edges",data:{id:h(),source:a.id(),target:r.id(),label:o},classes:"autorotate"});break;case"node":if(t.target===e){let a=t.position;e.add({group:"nodes",data:{id:h()},position:{x:a.x,y:a.y}})}break;case"shortestPath":if(t.target===e)return;if(i.push(t.target.id()),3===i.length&&i.shift(),2===i.length){let t=e.elements().aStar({root:e.getElementById(i[0]),goal:e.getElementById(i[1]),weight:e=>parseFloat(e.data("label"))||1});t.found?(e.elements().removeClass("highlighted"),t.path.forEach(e=>{e.addClass("highlighted")})):e.elements().removeClass("highlighted")}break;case"delete":if(t.target===e)return;t.target.remove()}}),e.on("dragfree","node",t=>{t.target.connectedEdges().forEach(t=>{let a=c(e.getElementById(t.data("source")),e.getElementById(t.data("target")));t.data("label",a)})});let d=window.localStorage.getItem("savedlayout");function c(e,t){let a=e.position(),r=t.position();return Math.sqrt(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2)).toFixed(2)}null!=d&&e.json(JSON.parse(d))};let n=setInterval(a,3e4);return()=>clearInterval(n)},[]),(0,o.jsxs)("div",{className:"flex flex-col items-center",children:[(0,o.jsxs)("div",{id:"controls",className:"flex flex-wrap justify-center space-x-5 mb-4 controls bg-slate-500 p-4 rounded-xl shadow-md",children:[(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsxs)("fieldset",{className:"text-white",children:[(0,o.jsx)("input",{type:"radio",id:"nodeMode",name:"mode",value:"node",className:"hidden peer/node",defaultChecked:!0}),(0,o.jsx)("label",{htmlFor:"nodeMode",className:"mr-4 cursor-pointer bg-sky-500/30 peer-checked/node:bg-slate-800 rounded-xl p-2",children:"Create Nodes"}),(0,o.jsx)("input",{type:"radio",id:"edgeMode",name:"mode",value:"edge",className:"hidden peer/edge"}),(0,o.jsx)("label",{htmlFor:"edgeMode",className:"mr-4 cursor-pointer bg-sky-500/30 peer-checked/edge:bg-slate-800 rounded-xl p-2",children:"Create Edges"}),(0,o.jsx)("input",{type:"radio",id:"shortestPathMode",name:"mode",value:"shortestPath",className:"hidden peer/shortestPath"}),(0,o.jsx)("label",{htmlFor:"shortestPathMode",className:"mr-4 cursor-pointer bg-sky-500/30 peer-checked/shortestPath:bg-slate-800 rounded-xl p-2",children:"Find Shortest Path"}),(0,o.jsx)("input",{type:"radio",id:"deleteMode",name:"mode",value:"delete",className:"hidden peer/delete"}),(0,o.jsx)("label",{htmlFor:"deleteMode",className:"mr-4 cursor-pointer bg-sky-500/30 peer-checked/delete:bg-slate-800 rounded-xl p-2",children:"Delete Mode"})]})}),(0,o.jsxs)("div",{className:"mt-1",children:[(0,o.jsx)("label",{htmlFor:"bgImageUpload",className:"cursor-pointer underline text-white p-2 rounded-xl",children:"Upload my own map"}),(0,o.jsx)("input",{type:"file",id:"bgImageUpload",accept:"image/*",className:"hidden"})]}),(0,o.jsx)("div",{style:{position:"fixed",bottom:"20px",right:"20px"},children:(0,o.jsx)("button",{onClick:r,className:"cursor-pointer text-white p-2 rounded-xl bg-sky-500/30",children:"\uD83D\uDD03"})})]}),(0,o.jsx)(s,{}),(0,o.jsx)("div",{id:"cy",ref:t,style:{position:"fixed",top:"0",right:"0",bottom:"0",left:"0",zIndex:"1"},className:"bg-slate-800"})]})}},4926:function(e,t,a){"use strict";var r,o;o=function(e){e&&e("core","cyCanvas",function(e){var t=this,a=t.container(),r=document.createElement("canvas");a.appendChild(r);var o=Object.assign({},{zIndex:1,pixelRatio:"auto"},e);function n(){var e=a.offsetWidth,n=a.offsetHeight,s=e*o.pixelRatio,l=n*o.pixelRatio;r.width=s,r.height=l,r.style.width=e+"px",r.style.height=n+"px",t.trigger("cyCanvas.resize")}return"auto"===o.pixelRatio&&(o.pixelRatio=window.devicePixelRatio||1),t.on("resize",function(){n()}),r.setAttribute("style","position:absolute; top:0; left:0; z-index:"+o.zIndex+";"),n(),{getCanvas:function(){return r},clear:function(e){var a=t.width(),r=t.height();e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,a*o.pixelRatio,r*o.pixelRatio),e.restore()},resetTransform:function(e){e.setTransform(1,0,0,1,0,0)},setTransform:function(e){var a=t.pan(),r=t.zoom();e.setTransform(1,0,0,1,0,0),e.translate(a.x*o.pixelRatio,a.y*o.pixelRatio),e.scale(r*o.pixelRatio,r*o.pixelRatio)}}})},e.exports&&(e.exports=function(e){o(e)}),void 0!==(r=(function(){return o}).call(t,a,t,e))&&(e.exports=r),"undefined"!=typeof cytoscape&&o(cytoscape)}},function(e){e.O(0,[264,971,23,744],function(){return e(e.s=5938)}),_N_E=e.O()}]);